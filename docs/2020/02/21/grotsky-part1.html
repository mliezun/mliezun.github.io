<!DOCTYPE HTML/><html lang="en-US"><head><script type="text/javascript">if (window.location.host === 'mliezun.github.io') {
                    window.location.host = 'mliezun.com';
                }
</script><meta charset="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Grotsky Part 1: Syntax</title><meta name="generator" content="Custom"/><meta property="og:title" content="Grotsky Part 1: Syntax"/><meta property="og:locale" content="en_US"/><meta name="description" content="Part 1 of building my own language series. Defining the syntax of grotsky toy language."/><meta property="og:description" content="Part 1 of building my own language series. Defining the syntax of grotsky toy language."/><meta name="keywords" content="parser,lexer,interpreter"/><link rel="canonical" href="https://mliezun.com/2020/02/21/grotsky-part1.html"/><meta property="og:url" content="https://mliezun.com/2020/02/21/grotsky-part1.html"/><meta property="og:site_name" content="mliezun.com"/><meta property="og:image" content="https://mliezun.com/assets/images/nyc.jpg"/><link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta property="twitter:title" content="Grotsky Part 1: Syntax"/><meta name="twitter:creator" content="@migueliezun"/><meta name="twitter:image" content="https://mliezun.com/assets/images/nyc.jpg"/>
<script type="application/ld+json">{"description":"Part 1 of building my own language series. Defining the syntax of grotsky toy language.","author":{"@type":"Person","name":"Miguel Liezun"},"@type":"BlogPosting","url":"https://mliezun.com/2020/02/21/grotsky-part1.html","headline":"Grotsky Part 1: Syntax","dateModified":"2020-02-21T00:00:00-03:00","datePublished":"2020-02-21T00:00:00-03:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mliezun.com/2020/02/21/grotsky-part1.html"},"@context":"https://schema.org"}
</script><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"/><link rel="stylesheet" href="/assets/css/style.css"/></head><body><div class="body-wrapper"><div class="body-content"><div class="site-header"><header><a href="/" style="text-decoration: none !important">Miguel's dev blog</a></header><button class="theme-toggle" id="theme-toggle" title="Toggle theme"><img src="/assets/images/circle-half.svg"/></button></div><hr/><article><div>

</div><h2>Grotsky Part 1: Syntax
</h2><div>

</div><h4>Syntax Restrictions
</h4><div>
<li>No use of semicolon <span class="single-quote">;</span></li>
<li>Block statements delimited by <span class="single-quote">begin</span> and <span class="single-quote">end</span></li>
<li>Function definition using <span class="single-quote">fn</span> keyword</li>
<li>Logic operators in plain english <span class="single-quote">or</span>, <span class="single-quote">and</span>, <span class="single-quote">not</span></li>
<li>Conditional statements use the following keywords: <span class="single-quote">if</span>, <span class="single-quote">elif</span>, <span class="single-quote">else</span></li>
<li>There is no switch statement</li>
<li>Class definition with <span class="single-quote">class</span> keyword</li>
<li>Arithmetic operations: <span class="single-quote">*</span>, <span class="single-quote">/</span>, <span class="single-quote">-</span>, <span class="single-quote">+</span>, <span class="single-quote">^</span></li>
<li>Grouping with parentheses <span class="single-quote">()</span></li>
<li>Native support for python-like lists and dictionaries: <span class="single-quote">[]</span>, <span class="single-quote">{}</span></li>
<li>Support for enhanced for loop: <span class="single-quote">for i, el in array</span></li>
<li>Keywords and identifiers can only use alphabethic characters</li>


</div><h4>Primitives
</h4><div>
<li><span class="single-quote">nil</span></li>
<li>Integers</li>
<li>Floats</li>
<li>Booleans</li>
<li>Strings</li>
<li>Lists</li>
<li>Dictionaries</li>


</div><h4>Example of functions and operations
</h4><div>
<pre class="triple-quote ruby">
## Arithmethic
print(2^10 - 2323*3)
# Output: -5945
print(2^(12*3+400/-4+10*5/2))
# Output: 1.8189894035458565e-12

## Logic
print(true or false)
# Output: true (short circuit)
print(false and true)
# Output: false (short circuit)

## Conditionals
if 3 > 2 or (1 < 3 and 2 == 2) begin
    print('Condition is true')
end
elif 3 == 4 begin
    print('Condition 2 is true')
end
else begin
    print('Conditions are false')
end

## Lists
for i in [1, 2, 3, 4] begin
    print(i)
end

let lst = [1, 2, 3, 4]
lst[0] = -1
print(lst) # Output: [-1, 2, 3, 4]
print(lst[1:3]) # Output: [2, 3]

## Dictionaries
# (dictionaries and lists not allowed as keys)
let dct = {
    "Key1": "Val1",
    2: "Val2",
    true: false
}
for key, val in dct begin
    print(key, val)
end

## Functions
fn square(x)
begin
    return x^2
end

fn operate(x, operation)
begin
    return operation(x)
end

## Clojure
fn makeCounter()
begin
    let n = 0
    return fn() begin
        n = n+1
        return n
    end
end

## Classes
class Counter
begin
    init(start) begin
        self.start = start
    end
    count() begin
        self.start = self.start+1
        return self.start
    end
end

class CounterTwo
begin
    count() begin
        return super.count()*2
    end
end
</pre>


</div><h4>Syntax definition
</h4><div>
Let's build a syntax definition in backus naur format that will be easy to parse with a recursive descent parser.


</div><h5>Expresions
</h5><div>
<pre class="triple-quote ">
expression       assignment;
list             "[" arguments? "]";
dictionary       "{" dict_elements? "}";
dict_elements    keyval ("," keyval)*;
keyval           expression ":" expression;
assignment       (call ".")? IDENTIFIER "=" assignment | access;
access           logic_or ("[" slice "]")*;
logic_or         logic_and ("or" logic_and)*;
logic_and        equality ("and" equality)*;
equality         comparison (("!=" | "==") comparison)*;
comparison       addition ((">" | ">=" | "<" | "<=") addition)*;
addition         multiplication (("-" | "+") multiplication)*;
multiplication   power (("/" | "*") power)*;
power            unary ("^" unary)*;
unary            ("not" | "-") unary | call;
call             primary ("(" arguments? ")" | "." IDENTIFIER)*;
arguments        expression ("," expression)*;
slice            (":" expression)
                | (":" expression ":" expression)
                | (":" ":" expression)
                | expression
                | (expression ":")
                | (expression ":" expression)
                | (expression ":" ":" expression)
                | (expression ":" expression ":" expression);
primary          NUMBER
                | STRING
                | "false"
                | "true"
                | "nil"
                | IDENTIFIER
                | "(" expression ")"
                | fnAnon
                | list
                | dictionary;
fnAnon           "fn" "(" parameters? ")" block;
</pre>


</div><h5>Statements
</h5><div>
<pre class="triple-quote ">
program         declaration* EOF;
declaration     classDecl | funDecl | varDecl | statement;
classDecl       "class" IDENTIFIER ( "<" IDENTIFIER )? "begin" methodDecl* "end" NEWLINE;
methodDecl      "class"? function;
funDecl         "fn" function ;
function        IDENTIFIER "(" parameters? ")" block ;
parameters      IDENTIFIER ( "," IDENTIFIER )* ;
varDecl         "let" IDENTIFIER ("=" expression)? NEWLINE;
statement       forStmt
                | ifStmt
                | returnStmt
                | whileStmt
                | exprStmt
                | block;
exprStmt        expression NEWLINE;
forStmt         "for"  (classicFor | newFor) statement;
classicFor      (varDecl | exprStmt | ",") expression? "," expression?;
newFor          IDENTIFIER ("," IDENTIFIER)? "in" expression;
ifStmt          "if" expression statement ("elif" expression statement)* ("else" statement)?;
returnStmt      "return" expression? NEWLINE;
whileStmt       "while" expression statement;
block           "begin" NEWLINE declaration* "end" NEWLINE;
</pre>

That's it! The next step is to build a lexer and a parser.

</div></article><footer><hr/><div class="footer-wrapper"><div><div>This blog was made with 
<a target="_blank" href="https://github.com/mliezun/grotsky">Grotsky</a></div><div>Blog
<a target="_blank" href="https://github.com/mliezun/mliezun.com">source code</a></div></div><div class="footer-socials"><a target="_blank" href="https://mliezun.com/feed.xml"><img alt="RSS Feed" src="/assets/images/socials/rss.png" width="20" height="20" style="border-radius: 3px"/></a><a target="_blank" href="https://github.com/mliezun"><img alt="Github" src="/assets/images/socials/github.png" width="20" height="20"/></a><a target="_blank" href="https://x.com/migueliezun"><img alt="X (Twitter)" src="/assets/images/socials/x.ico" width="20" height="20" style="border-radius: 5px"/></a><a target="_blank" href="https://www.linkedin.com/in/miguel-liezun-8697a9168/"><img alt="LinkedIn" src="/assets/images/socials/linkedin.png" width="20" height="20"/></a></div></div></footer></div></div><script src="/assets/js/theme-switcher.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-dark.min.css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script><script>document.querySelectorAll('.triple-quote').forEach(function (el) {
                    if (el.classList.length > 1) hljs.highlightElement(el, {language: el.classList[1]});
                    else hljs.highlightElement(el);
                    el.classList.remove('hljs');
                })
</script><script>document.querySelectorAll('.single-quote').forEach(function (el) {
                    if (el.classList.length > 1) hljs.highlightElement(el, {language: el.classList[1]});
                    else hljs.highlightElement(el);
                    el.classList.remove('hljs');
                })
</script></body></html>